import{a as se}from"./chunk-MRVDKUFQ.js";import{a as j,b as Se}from"./chunk-TG267DBW.js";import{b as Oe}from"./chunk-OGGY5HJQ.js";import{a as k,c as De,d as ye,e as xe,f as Me,g as we,h as Ee,i as Le,j as Ie,k as Te,l as Ne,m as Ae,o as Fe}from"./chunk-DBWB3LBE.js";import{q as _e,v as Ce}from"./chunk-DBA5FPW7.js";import{a as Re}from"./chunk-HAJ3YRHB.js";import{a as Ve}from"./chunk-KTNC6XIE.js";import{c as F,g as O,h as V,j as ce,l as ue,m as R,n as U,o as pe,p as fe,q as he,r as be,s as ge,t as ve,v as P}from"./chunk-I7XF2BCB.js";import{c as me,o as J}from"./chunk-UHIV2YIU.js";import{$b as y,Ba as te,Bc as Q,Ca as ie,Dc as $,Kb as p,La as ne,Lb as G,Mb as u,Vb as o,Wb as i,Xb as f,Yb as b,Zb as g,cc as v,ec as _,g as B,id as re,jc as H,jd as A,kc as W,lc as z,m as X,mb as m,mc as w,nb as h,nc as a,nd as de,oc as E,od as le,pc as L,qc as oe,ra as M,rc as I,sa as Y,sc as T,tc as N,ua as S,va as D,wa as Z,wc as ae,xa as ee}from"./chunk-WHIBKZZI.js";var q=class{};var x=(()=>{let t=class t{listen(){return this._listners.asObservable()}filter(n){this._listners.next(n)}constructor(n){this.http=n,this.URL="http://20.49.205.136/deductions",this._listners=new X}createDeduction(n){return this.http.post(this.URL,n)}getAllDeductions(){return this.http.get(this.URL)}updateDeduction(n,r){let d=`${this.URL}/${n}`;return this.http.put(d,r)}deleteDeduction(n){let r=`${this.URL}/${n}`;return this.http.delete(r)}};t.\u0275fac=function(r){return new(r||t)(ne(me))},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Be(e,t){if(e&1){let l=y();o(0,"form",7)(1,"div",8)(2,"label",9),a(3,"Ammount:"),i(),f(4,"input",10),i(),o(5,"div",8)(6,"label",11),a(7,"Description:"),i(),f(8,"input",12),i(),o(9,"div",13)(10,"button",14),v("click",function(){S(l);let r=_();return D(r.updateDeduction())}),a(11," Submit "),i(),o(12,"button",15),a(13," Close "),i()()()}if(e&2){let l=_();u("formGroup",l.updateForm)}}var Pe=(()=>{let t=class t{constructor(n,r){this.formB=n,this.deductionService=r}ngOnInit(){if(this.deduction==null)return;let n=this.deduction;this.updateForm=this.formB.group({ammountDeduction:[n.amount],descriptionDeduction:[n.description]}),this.updateForm.patchValue(n)}updateDeduction(){return B(this,null,function*(){this.deduction.description=this.updateForm.value.descriptionDeduction,this.deduction.amount=this.updateForm.value.ammountDeduction,this.deduction.date=new Date().toISOString().toString(),this.deductionService.updateDeduction(this.deduction.id,this.deduction).subscribe(n=>B(this,null,function*(){alert("Updated Successfully!")}),n=>{console.error("Update failed:",n)})})}};t.\u0275fac=function(r){return new(r||t)(h(P),h(x))},t.\u0275cmp=M({type:t,selectors:[["app-update-deduction"]],inputs:{deduction:"deduction"},decls:8,vars:1,consts:[[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"form-group"],["for","date"],["type","number","value","","id","date","name","date","formControlName","ammountDeduction","placeholder","Tapez la date",1,"form-control"],["for","description"],["type","text","value","","id","description","name","description","formControlName","descriptionDeduction","placeholder","Tapez la description",1,"form-control"],[1,"modal-footer"],["type","submit","data-bs-dismiss","modal",1,"btn","btn-primary",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"]],template:function(r,d){r&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5",3),a(4,"Edit Deduction"),i(),f(5,"button",4),i(),o(6,"div",5),p(7,Be,14,1,"form",6),i()()()),r&2&&(m(7),u("ngIf",d.updateForm))},dependencies:[A,R,F,U,O,V,pe,fe]});let e=t;return e})();function He(e,t){e&1&&(o(0,"div",51),a(1," Description is required "),i())}function We(e,t){e&1&&(o(0,"div",51),a(1," Amount is required "),i())}function ze(e,t){if(e&1&&(o(0,"option",52),a(1),i()),e&2){let l=t.$implicit;u("value",l.id),m(),oe("",l.firstname," ",l.lastname,"")}}function Qe(e,t){e&1&&(o(0,"th",53),a(1,"FirstName"),i())}function $e(e,t){if(e&1&&(o(0,"td",54),a(1),i()),e&2){let l=t.$implicit;m(),E(l.user==null?null:l.user.firstname)}}function Je(e,t){e&1&&(o(0,"th",53),a(1,"LastName"),i())}function Ke(e,t){if(e&1&&(o(0,"td",54),a(1),i()),e&2){let l=t.$implicit;m(),E(l.user==null?null:l.user.lastname)}}function Xe(e,t){e&1&&(o(0,"th",53),a(1,"Month"),i())}function Ye(e,t){if(e&1&&(o(0,"td",54),a(1),Q(2,"date"),i()),e&2){let l=t.$implicit;m(),L(" ",$(2,1,l.date,"MMM d, yyyy")," ")}}function Ze(e,t){e&1&&(o(0,"th",53),a(1," Description "),i())}function et(e,t){if(e&1&&(o(0,"td",54),a(1),i()),e&2){let l=t.$implicit;m(),E(l.description)}}function tt(e,t){e&1&&(o(0,"th",53),a(1,"Amount"),i())}function it(e,t){if(e&1&&(o(0,"td",54),a(1),Q(2,"number"),i()),e&2){let l=t.$implicit;m(),L(" ",$(2,1,l.amount,"1.0-0")," ")}}function nt(e,t){e&1&&(o(0,"th",53),a(1," Actions "),i())}function ot(e,t){if(e&1){let l=y();o(0,"td",54)(1,"div",55)(2,"button",56),f(3,"i",57),i(),o(4,"div",58),f(5,"app-update-deduction",59),i()(),o(6,"div",55)(7,"button",60),f(8,"i",61),i(),o(9,"div",62)(10,"div",63)(11,"div",16)(12,"div",17)(13,"h5",18),a(14," Delete Announcement "),i(),o(15,"button",64)(16,"span",65),a(17,"\xD7"),i()()(),o(18,"div",20)(19,"h5"),a(20," Are you sure you want to delete this item? This action cannot be undone. "),i()(),o(21,"div",32)(22,"button",34),a(23," Close "),i(),o(24,"button",66),v("click",function(){let d=S(l).$implicit,s=_();return D(s.deleteDeduction(d.id))}),a(25," Confirm "),i()()()()()()()}if(e&2){let l=t.$implicit,n=t.index;m(2),G("data-bs-target","#exampleModalupdate"+n),m(2),u("id","exampleModalupdate"+n),m(),u("deduction",l),m(2),G("data-bs-target","#exampleModalConfirm"+n),m(2),u("id","exampleModalConfirm"+n)}}function at(e,t){e&1&&f(0,"tr",67)}function rt(e,t){e&1&&f(0,"tr",68)}function dt(e,t){if(e&1&&(o(0,"tr",69)(1,"td",70),a(2),i()()),e&2){_();let l=w(52);m(2),L(' No data matching the filter "',l.value,'" ')}}var lt=()=>[5,10,25,100],ke=(()=>{let t=class t{constructor(n,r,d,s){this.dedService=n,this.formB=r,this.deductionService=d,this.userService=s,this.displayedColumns=["FirstName","LastName","Month","Description","Amount","Action"],this.deduction=new q,this.allUsers=[],this.categories=["FOOD","TRANSPORTATION","LODGING","ENTERTAINMENT","MISCELLANEOUS"],this.dedService.listen().subscribe(C=>{this.loadData()})}ngOnInit(){this.loadData(),this.loadAllUsers()}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}applyFilter(n){let r=n.target.value;this.dataSource.filter=r.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}loadData(){this.dedService.getAllDeductions().subscribe(n=>{this.data=n,this.dataSource=new Fe(this.data)},n=>{console.error("Error fetching deductions:",n)})}deleteDeduction(n){this.dedService.deleteDeduction(n).subscribe(r=>{alert("Deduction deleted successfully"),this.loadData()})}loadAllUsers(){this.userService.getAllUsers().subscribe(n=>{this.allUsers=n},n=>{console.error(n)})}add(n){if(n.valid){let r={id:"",userId:n.value.user,description:n.value.description,amount:n.value.amount,date:new Date().toISOString().toString()};this.deductionService.createDeduction(r).subscribe(()=>{alert("Deduction added successfully!"),this.deductionService.filter("RegisterClick")},d=>{console.error(d)})}}};t.\u0275fac=function(r){return new(r||t)(h(x),h(P),h(x),h(se))},t.\u0275cmp=M({type:t,selectors:[["app-list-deduction"]],viewQuery:function(r,d){if(r&1&&(H(k,7),H(j,7)),r&2){let s;W(s=z())&&(d.paginator=s.first),W(s=z())&&(d.sort=s.first)}},decls:77,vars:11,consts:[[1,"pcoded-main-container"],[1,"pcoded-wrapper"],[1,"pcoded-content"],[1,"pcoded-inner-content"],[1,"main-body"],[1,"page-wrapper"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModalAdd",1,"btn","btn-sm","transparent-button"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","black","viewBox","0 0 16 16",1,"bi","bi-plus-square"],["d","M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"],["d","M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"],["id","exampleModalAdd","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[3,"ngSubmit"],["addForm","ngForm"],[1,"form-group"],["for","description"],["type","text","id","description","name","description","required","","placeholder","Enter description",1,"form-control",3,"ngModel","ngModelChange"],["class","text-danger",4,"ngIf"],["for","amount"],["type","number","id","amount","name","amount","required","","placeholder","Enter amount",1,"form-control",3,"ngModel","ngModelChange"],["for","user"],["id","user","name","user","required","",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","submit","data-bs-dismiss","modal",1,"btn","btn-primary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["matInput","","placeholder","Ex. Mia",3,"keyup"],["input",""],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","FirstName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","LastName"],["matColumnDef","Month"],["matColumnDef","Description"],["matColumnDef","Amount"],["matColumnDef","Action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",3,"pageSizeOptions"],[1,"text-danger"],[3,"value"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"list-inline-item"],["type","button","data-bs-toggle","modal","data-toggle","tooltip","data-placement","top","title","Edit",1,"btn","btn-sm","rounded-0","transparent-button1"],[1,"fa","fa-edit","text-success"],["role","dialog","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade",3,"id"],[3,"deduction"],["type","button","data-toggle","tooltip","data-placement","top","title","Delete","data-bs-toggle","modal",1,"btn","btn-sm","rounded-0","transparent-button1"],[1,"fas","fa-trash","red-icon"],["tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(r,d){if(r&1){let s=y();o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"h5"),a(11,"Deductions"),i(),a(12," \xA0 "),o(13,"button",10),Z(),o(14,"svg",11),f(15,"path",12)(16,"path",13),i()(),ee(),o(17,"div",14)(18,"div",15)(19,"div",16)(20,"div",17)(21,"h5",18),a(22,"Add Deduction "),i(),f(23,"button",19),i(),o(24,"div",20)(25,"form",21,22),v("ngSubmit",function(){S(s);let c=w(26);return D(d.add(c))}),o(27,"fieldset")(28,"div",23)(29,"label",24),a(30,"Description:"),i(),o(31,"input",25),N("ngModelChange",function(c){return T(d.deduction.description,c)||(d.deduction.description=c),c}),i(),p(32,He,2,0,"div",26),i(),o(33,"div",23)(34,"label",27),a(35,"Amount:"),i(),o(36,"input",28),N("ngModelChange",function(c){return T(d.deduction.amount,c)||(d.deduction.amount=c),c}),i(),p(37,We,2,0,"div",26),i(),o(38,"div",23)(39,"label",29),a(40,"User:"),i(),o(41,"select",30),N("ngModelChange",function(c){return T(d.deduction.userId,c)||(d.deduction.userId=c),c}),p(42,ze,2,3,"option",31),i()()(),o(43,"div",32)(44,"button",33),a(45,"Save"),i(),o(46,"button",34),a(47,"Close"),i()()()()()()()(),o(48,"mat-form-field")(49,"mat-label"),a(50,"Filter"),i(),o(51,"input",35,36),v("keyup",function(c){return d.applyFilter(c)}),i()(),o(53,"div",37)(54,"table",38),b(55,39),p(56,Qe,2,0,"th",40)(57,$e,2,1,"td",41),g(),b(58,42),p(59,Je,2,0,"th",40)(60,Ke,2,1,"td",41),g(),b(61,43),p(62,Xe,2,0,"th",40)(63,Ye,3,4,"td",41),g(),b(64,44),p(65,Ze,2,0,"th",40)(66,et,2,1,"td",41),g(),b(67,45),p(68,tt,2,0,"th",40)(69,it,3,4,"td",41),g(),b(70,46),p(71,nt,2,0,"th",40)(72,ot,26,5,"td",41),g(),p(73,at,1,0,"tr",47)(74,rt,1,0,"tr",48)(75,dt,3,1,"tr",49),i(),f(76,"mat-paginator",50),i()()()()()()()()()()}if(r&2){let s=w(26);m(31),I("ngModel",d.deduction.description),m(),u("ngIf",s.controls.description.errors==null?null:s.controls.description.errors.required),m(4),I("ngModel",d.deduction.amount),m(),u("ngIf",s.controls.amount.errors==null?null:s.controls.amount.errors.required),m(4),I("ngModel",d.deduction.userId),m(),u("ngForOf",d.allUsers),m(12),u("dataSource",d.dataSource),m(19),u("matHeaderRowDef",d.displayedColumns),m(),u("matRowDefColumns",d.displayedColumns),m(2),u("pageSizeOptions",ae(10,lt))}},dependencies:[re,A,R,be,ge,F,U,he,O,V,ve,ue,ce,De,xe,Le,Me,ye,Ie,we,Ee,Te,Ne,Ae,k,j,Se,Oe,Ce,_e,Pe,le,de],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:0%}.transparent-button[_ngcontent-%COMP%]{background-color:transparent;border:none}.transparent-button[_ngcontent-%COMP%]:hover{background-color:#d7d7d7}.transparent-button1[_ngcontent-%COMP%]{background-color:transparent;border:none}.transparent-button1[_ngcontent-%COMP%]:hover{background-color:transparent}.transparent-button1[_ngcontent-%COMP%]:active{background-color:#ebebeb}.red-icon[_ngcontent-%COMP%]{color:red}.column-width[_ngcontent-%COMP%]{width:25%}"]});let e=t;return e})();var mt=[{path:"",component:ke,canActivate:[Ve,Re]}],It=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=Y({type:t}),t.\u0275inj=ie({imports:[J.forChild(mt),J]});let e=t;return e})();export{It as a};
