import{a as H,b as K}from"./chunk-YZQJ655K.js";import"./chunk-KXPX42HO.js";import{c as L}from"./chunk-TG267DBW.js";import{c as J}from"./chunk-OGGY5HJQ.js";import{a as R,n as $}from"./chunk-DBWB3LBE.js";import{c as Z,w as B}from"./chunk-DBA5FPW7.js";import"./chunk-AWI2NUMG.js";import"./chunk-AESYL7IM.js";import{a as y}from"./chunk-KTNC6XIE.js";import{c as w,e as c,g as _,h as V,m as j,o as k,p as G,t as P,u as q,v as O,w as T,x as z}from"./chunk-I7XF2BCB.js";import{m as U,o as g}from"./chunk-UHIV2YIU.js";import{$b as x,Ca as f,Kb as I,Mb as v,Vb as n,Wb as o,Xb as l,cc as b,ec as A,g as S,id as N,mb as d,nb as h,nc as a,pd as D,qc as E,ra as M,sa as u,ua as C,va as F}from"./chunk-WHIBKZZI.js";function ee(r,e){if(r&1){let p=x();n(0,"div")(1,"label",23)(2,"input",24),b("change",function(t){let m=C(p).$implicit,Y=A();return F(Y.onuserSelect(m,t))}),o(),a(3),o()()}if(r&2){let p=e.$implicit;d(3),E(" ",p.firstname," ",p.lastname," ")}}var W=(()=>{let e=class e{constructor(i,t,s){this.fb=i,this.router=t,this.missionService=s,this.availableUsers=[],this.selectedUsers=[],this.clientId="",this.myForm=this.fb.group({title:["",[c.pattern("[A-Za-z]+"),c.required]],description:["",[c.pattern("[A-Za-z]+"),c.required]],startDate:[""],endDate:[""],status:[""],userId:[""],client:[""]})}ngOnInit(){return S(this,null,function*(){let i=yield localStorage.getItem("user");if(i){let s=JSON.parse(i).email;this.missionService.getUserIdByEmail(s).subscribe(m=>{this.clientId=m.id,console.log(this.clientId)},m=>{console.error("Error fetching user ID by email:",m)})}yield this.getAvailableUser()})}getAvailableUser(){this.missionService.getAvailableUser().subscribe(i=>{this.availableUsers=i.filter(t=>t.id!=this.clientId),console.log(this.availableUsers)},i=>{console.error("Error fetching available users:",i)})}onuserSelect(i,t){t.target.checked?this.selectedUsers.push(i):this.selectedUsers=this.selectedUsers.filter(m=>m.id!==i.id)}onSubmit(){this.myForm.value.client=this.clientId;let i=this.selectedUsers.map(t=>t.id);this.myForm.value.userId=i,this.myForm.value.status="PENDING",this.missionService.addMission(this.myForm.value).subscribe(t=>{this.router.navigate(["/home/missions"])},t=>{})}};e.\u0275fac=function(t){return new(t||e)(h(O),h(U),h(H))},e.\u0275cmp=M({type:e,selectors:[["app-add-mission"]],decls:36,vars:3,consts:[[1,"pcoded-main-container"],[1,"pcoded-wrapper"],[1,"pcoded-content"],[1,"pcoded-inner-content"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"col-md-6"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","title"],["type","text","id","title","formControlName","title","pattern","[A-Za-z]+","required","","placeholder","Ex. mission one",1,"form-control"],["for","description"],["type","text","id","description","formControlName","description","pattern","[A-Za-z]+","required","",1,"form-control"],["for","startDate"],["type","date","id","startDate","formControlName","startDate",1,"form-control"],["for","endDate"],["type","date","id","endDate","formControlName","endDate",1,"form-control"],["for","userId"],[4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"checkbox-label"],["type","checkbox",1,"styled-checkbox",3,"change"]],template:function(t,s){t&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"h5"),a(9,"Add Mission"),o()(),n(10,"div",8),l(11,"hr"),n(12,"div",4)(13,"div",9)(14,"form",10),b("ngSubmit",function(){return s.onSubmit()}),n(15,"div",11)(16,"label",12),a(17,"title"),o(),l(18,"input",13),o(),n(19,"div",11)(20,"label",14),a(21,"description"),o(),l(22,"input",15),o(),n(23,"div",11)(24,"label",16),a(25,"startDate"),o(),l(26,"input",17),o(),n(27,"div",11)(28,"label",18),a(29,"endDate"),o(),l(30,"input",19),o(),n(31,"label",20),a(32,"Available employees"),o(),I(33,ee,4,2,"div",21),n(34,"button",22),a(35," Add "),o()()()()()()()()()()()()),t&2&&(d(14),v("formGroup",s.myForm),d(19),v("ngForOf",s.availableUsers),d(),v("disabled",s.myForm.invalid))},dependencies:[N,j,w,_,V,P,q,k,G]});let r=e;return r})();var te=[{path:"",component:K,canActivate:[y]},{path:"add",component:W,canActivate:[y]}],X=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u({type:e}),e.\u0275inj=f({imports:[g.forChild(te),g]});let r=e;return r})();var xe=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u({type:e}),e.\u0275inj=f({imports:[D,T,z,X,$,R,L,Z,J,B]});let r=e;return r})();export{xe as MissionModule};
