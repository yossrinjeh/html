import{a as Q}from"./chunk-KXPX42HO.js";import{a as S,b as P}from"./chunk-TG267DBW.js";import{b as ot}from"./chunk-OGGY5HJQ.js";import{a as v,c as G,d as J,e as K,f as W,g as X,h as Y,i as Z,j as tt,k as et,l as it,m as nt,o as at}from"./chunk-DBWB3LBE.js";import{q as O,v as q}from"./chunk-DBA5FPW7.js";import{v as z}from"./chunk-I7XF2BCB.js";import{c as N,m as A,n as B}from"./chunk-UHIV2YIU.js";import{$b as F,Ba as U,Kb as c,La as $,Mb as C,Vb as a,Wb as o,Xb as f,Yb as p,Zb as u,cc as M,ec as w,jc as x,kc as b,lc as D,m as E,mb as m,mc as H,nb as _,nc as r,oc as h,pc as k,qc as V,ra as L,ua as y,va as T,wa as R,wc as j,xa as I}from"./chunk-WHIBKZZI.js";var rt=(()=>{let e=class e{listen(){return this._listners.asObservable()}filter(i){this._listners.next(i)}constructor(i){this._http=i,this.URL="http://20.49.205.136:3000/missions",this._listners=new E}getAvailableUser(){return this._http.get(this.URL+"/availableUsers")}getUserIdByEmail(i){return this._http.get(this.URL+`/email/${i}`)}addMission(i){return this._http.post(this.URL,i)}getAllMissions(){return this._http.get(this.URL)}deleteMission(i){let n=`${this.URL}/${i}`;return this._http.delete(n)}getUserNameById(i){let n=`${this.URL}/${i}/username`;return this._http.get(n)}};e.\u0275fac=function(n){return new(n||e)($(N))},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function mt(t,e){t&1&&(a(0,"th",31),r(1,"Title"),o())}function dt(t,e){if(t&1&&(a(0,"td",32),r(1),o()),t&2){let s=e.$implicit;m(),h(s.title)}}function ct(t,e){t&1&&(a(0,"th",31),r(1,"Description"),o())}function pt(t,e){if(t&1&&(a(0,"td",32),r(1),o()),t&2){let s=e.$implicit;m(),h(s.description)}}function ut(t,e){t&1&&(a(0,"th",31),r(1,"Start Date"),o())}function ft(t,e){if(t&1&&(a(0,"td",32),r(1),o()),t&2){let s=e.$implicit;m(),h(s.startDate)}}function ht(t,e){t&1&&(a(0,"th",31),r(1,"End Date"),o())}function _t(t,e){if(t&1&&(a(0,"td",32),r(1),o()),t&2){let s=e.$implicit;m(),h(s.endDate)}}function Ct(t,e){t&1&&(a(0,"th",31),r(1,"Status"),o())}function vt(t,e){if(t&1&&(a(0,"td",32),r(1),o()),t&2){let s=e.$implicit;m(),h(s.status)}}function St(t,e){t&1&&(a(0,"th",31),r(1,"Client"),o())}function Mt(t,e){if(t&1&&(a(0,"td",32),r(1),o()),t&2){let s=e.$implicit;m(),V(" ",s.clientFirstName," ",s.clientLastName," ")}}function wt(t,e){t&1&&(a(0,"th",31),r(1,"Actions"),o())}function xt(t,e){if(t&1){let s=F();a(0,"td",32)(1,"button",33),f(2,"i",34),o(),a(3,"button",35),M("click",function(){let l=y(s).$implicit,d=w();return T(d.deleteMission(l.id))}),f(4,"i",36),o()()}}function bt(t,e){t&1&&f(0,"tr",37)}function Dt(t,e){t&1&&f(0,"tr",38)}function gt(t,e){if(t&1&&(a(0,"tr",39)(1,"td",40),r(2),o()()),t&2){w();let s=H(21);m(2),k(' No data matching the filter "',s.value,'" ')}}var Et=()=>[5,10,25,100],At=(()=>{let e=class e{constructor(i,n,l,d){this.missionService=i,this.formB=n,this.route=l,this.userService=d,this.displayedColumns=["title","description","startDate","endDate","status","client","action"],this.missionService.listen().subscribe(g=>{this.loadData()})}ngOnInit(){this.loadData()}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}applyFilter(i){let n=i.target.value;this.dataSource.filter=n.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}loadData(){this.missionService.getAllMissions().subscribe(i=>{this.data=i,this.data.forEach(n=>{n.client&&this.userService.getUserById(n.client).subscribe(l=>{n.clientFirstName=l.firstname,n.clientLastName=l.lastname},l=>{console.error(`Error fetching client details for mission ${n.id}:`,l)})}),this.dataSource=new at(this.data)},i=>{console.error("Error fetching missions:",i)})}deleteMission(i){this.missionService.deleteMission(i).subscribe(n=>{alert("Mission deleted successfully"),this.loadData()})}};e.\u0275fac=function(n){return new(n||e)(_(rt),_(z),_(A),_(Q))},e.\u0275cmp=L({type:e,selectors:[["app-list-mission"]],viewQuery:function(n,l){if(n&1&&(x(v,7),x(S,7)),n&2){let d;b(d=D())&&(l.paginator=d.first),b(d=D())&&(l.sort=d.first)}},decls:49,vars:5,consts:[[1,"pcoded-main-container"],[1,"pcoded-wrapper"],[1,"pcoded-content"],[1,"pcoded-inner-content"],[1,"main-body"],[1,"page-wrapper"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],["type","button","routerLink","add",1,"btn","btn-sm","transparent-button"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","black","viewBox","0 0 16 16",1,"bi","bi-plus-square"],["d","M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"],["d","M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"],["matInput","","placeholder","Ex. Mission title",3,"keyup"],["input",""],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","title"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","description"],["matColumnDef","startDate"],["matColumnDef","endDate"],["matColumnDef","status"],["matColumnDef","client"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of missions",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["type","button",1,"btn","btn-sm","rounded-0","transparent-button1"],[1,"fa","fa-edit","text-success"],["type","button",1,"btn","btn-sm","rounded-0","transparent-button1",3,"click"],[1,"fas","fa-trash","red-icon"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","6",1,"mat-cell"]],template:function(n,l){n&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"h5"),r(11,"Missions"),o(),r(12," \xA0 "),a(13,"button",10),R(),a(14,"svg",11),f(15,"path",12)(16,"path",13),o()()(),I(),a(17,"mat-form-field")(18,"mat-label"),r(19,"Filter"),o(),a(20,"input",14,15),M("keyup",function(g){return l.applyFilter(g)}),o()(),a(22,"div",16)(23,"table",17),p(24,18),c(25,mt,2,0,"th",19)(26,dt,2,1,"td",20),u(),p(27,21),c(28,ct,2,0,"th",19)(29,pt,2,1,"td",20),u(),p(30,22),c(31,ut,2,0,"th",19)(32,ft,2,1,"td",20),u(),p(33,23),c(34,ht,2,0,"th",19)(35,_t,2,1,"td",20),u(),p(36,24),c(37,Ct,2,0,"th",19)(38,vt,2,1,"td",20),u(),p(39,25),c(40,St,2,0,"th",19)(41,Mt,2,2,"td",20),u(),p(42,26),c(43,wt,2,0,"th",19)(44,xt,5,0,"td",20),u(),c(45,bt,1,0,"tr",27)(46,Dt,1,0,"tr",28)(47,gt,3,1,"tr",29),o(),f(48,"mat-paginator",30),o()()()()()()()()()()),n&2&&(m(23),C("dataSource",l.dataSource),m(22),C("matHeaderRowDef",l.displayedColumns),m(),C("matRowDefColumns",l.displayedColumns),m(2),C("pageSizeOptions",j(4,Et)))},dependencies:[B,G,K,Z,W,J,tt,X,Y,et,it,nt,v,S,P,ot,q,O]});let t=e;return t})();export{rt as a,At as b};
