import{A as Te,B as Ee,C as Fe,D as Me,E as De,F as Pe,G as Le,H as D,b as ce,c as me,i as de,j as pe,k as ue,l as Q,m as fe,n as z,o as he,p as ve,q as ge,r as ye,s as _e,t as Se,u as Ce,v as be,w as Re,x as xe,y as Ie,z as we}from"./chunk-QRGCNIAO.js";import{b as O,c as M,e as N,f as V,k as U,m as $,n as B,r as G,s as H,t as q,u as le,v as se}from"./chunk-4ZXNYKJD.js";import{b as _}from"./chunk-3RCK6QBP.js";import{a as Z}from"./chunk-WB6ARDAB.js";import{c as ne,k as ae,m as h,o as te}from"./chunk-HXFCOTNJ.js";import{$b as w,Ba as g,Gb as a,Hb as l,Ib as S,Jb as A,Kb as k,Mb as I,Pb as y,Qc as E,Rb as f,Rc as F,Vb as W,Vc as oe,Wb as X,Xb as Y,Yb as ie,Zb as m,_b as ee,ab as c,bb as p,gc as re,ha as T,ia as L,ka as R,la as x,ra as C,sa as j,vb as u,xb as d}from"./chunk-OCYIH7HC.js";var J=(()=>{let e=class e{constructor(r){this._http=r,this.URL="http://20.49.205.136:3000/privileges"}getPrivileges(){return this._http.get(this.URL)}};e.\u0275fac=function(i){return new(i||e)(g(ne))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function qe(t,e){t&1&&(a(0,"div")(1,"span",18),m(2,"Role Title must contain only uppercase letters."),l()())}function Qe(t,e){if(t&1){let s=I();a(0,"div")(1,"label",19)(2,"input",20),y("change",function(i){let n=R(s).$implicit,v=f();return x(v.onprivilegeSelect(n,i))}),l(),m(3),l()()}if(t&2){let s=e.$implicit;c(3),w(" ",s.name," ")}}var Oe=(()=>{let e=class e{constructor(r,i,o,n,v){this.privilegeService=r,this.roleService=i,this.formBuilder=o,this.router=n,this.encryptionService=v,this.privileges=[],this.selectedPrivileges=[],this.myForm=this.formBuilder.group({roleTitle:["",[M.pattern("[A-Z]+"),M.required]]})}onprivilegeSelect(r,i){if(i.target.checked)this.selectedPrivileges.push(r);else{let o=this.selectedPrivileges.indexOf(r);o!==-1&&this.selectedPrivileges.splice(o,1)}}ngOnInit(){this.getPrivileges()}getPrivileges(){this.privilegeService.getPrivileges().subscribe(r=>{this.privileges=r},r=>{})}onSubmit(){let r=this.myForm.get("roleTitle")?.value,i=this.selectedPrivileges.map(n=>n.id),o={name:r,privileges:i};this.roleService.addRole(o).subscribe(n=>{let v=localStorage.getItem("authorities");this.encryptionService.decrypt(v,"2f7").includes("READ::ROLE")?this.router.navigate(["/home/roles"]):this.router.navigate(["/home"])},n=>{})}};e.\u0275fac=function(i){return new(i||e)(p(J),p(D),p(q),p(h),p(_))},e.\u0275cmp=T({type:e,selectors:[["app-add-role"]],decls:21,vars:4,consts:[[1,"pcoded-main-container"],[1,"pcoded-wrapper"],[1,"pcoded-content"],[1,"pcoded-inner-content"],[1,"main-body"],[1,"page-wrapper"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"mb-9",3,"formGroup","ngSubmit"],[1,"form-floating"],["type","text","id","roleTitle","formControlName","roleTitle","pattern","[A-Za-z]+","required","","placeholder","ROLE TITLE",1,"form-control"],["for","roleTitle"],[4,"ngIf"],[4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"error-message"],[1,"checkbox-label"],["type","checkbox",1,"styled-checkbox",3,"change"]],template:function(i,o){if(i&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"h5"),m(11,"Create Role"),l()(),a(12,"div",10)(13,"form",11),y("ngSubmit",function(){return o.onSubmit()}),a(14,"div",12),S(15,"input",13)(16,"label",14),u(17,qe,3,0,"div",15),l(),u(18,Qe,4,1,"div",16),a(19,"button",17),m(20," Add "),l()()()()()()()()()()()()),i&2){let n;c(13),d("formGroup",o.myForm),c(4),d("ngIf",((n=o.myForm.get("roleTitle"))==null?null:n.invalid)&&(((n=o.myForm.get("roleTitle"))==null?null:n.dirty)||((n=o.myForm.get("roleTitle"))==null?null:n.touched))),c(),d("ngForOf",o.privileges),c(),d("disabled",o.myForm.invalid)}},dependencies:[E,F,U,O,N,V,G,H,$,B],styles:[".error-message[_ngcontent-%COMP%]{color:red}"]});let t=e;return t})();function ze(t,e){t&1&&(a(0,"div")(1,"span",18),m(2,"Role Title must contain only uppercase letters."),l()())}function Ze(t,e){if(t&1){let s=I();a(0,"div")(1,"label",19)(2,"input",20),y("change",function(i){let n=R(s).$implicit,v=f();return x(v.onPrivilegeSelect(n,i))}),l(),m(3),l()()}if(t&2){let s=e.$implicit,r=f();c(2),d("checked",r.isSelected(s)),c(),w(" ",s.name," ")}}var Ne=(()=>{let e=class e{constructor(r,i,o,n,v){this.router=r,this.fb=i,this.roleService=o,this.privilegeService=n,this.route=v,this.selectedPrivileges=[],this.privileges=[],this.myForm=this.fb.group({roleTitle:["",[M.pattern("[A-Z]+"),M.required]]})}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.getRoleById(this.id),this.getPrivileges()}getPrivileges(){this.privilegeService.getPrivileges().subscribe(r=>{this.privileges=r,this.myForm.patchValue({id:this.role.id,roleTitle:this.role.name})},r=>{})}getRoleById(r){this.roleService.getRoleById(r).subscribe({next:i=>{this.role=i,this.selectedPrivileges=this.role.privilegeId,this.myForm.patchValue({roleTitle:this.role.name})},error:i=>{}})}isSelected(r){return this.selectedPrivileges.includes(r.id)}onPrivilegeSelect(r,i){if(i.target.checked)this.selectedPrivileges.push(r.id);else{let o=this.selectedPrivileges.indexOf(r.id);o!==-1&&this.selectedPrivileges.splice(o,1)}}onSubmit(){let r=this.myForm.get("roleTitle")?.value,i={id:this.id,name:r,privilegeId:this.selectedPrivileges};this.roleService.updateRole(i.id,i).subscribe(o=>{this.router.navigate(["/home/roles"])},o=>{})}};e.\u0275fac=function(i){return new(i||e)(p(h),p(q),p(D),p(J),p(ae))},e.\u0275cmp=T({type:e,selectors:[["app-update-role"]],decls:21,vars:4,consts:[[1,"pcoded-main-container"],[1,"pcoded-wrapper"],[1,"pcoded-content"],[1,"pcoded-inner-content"],[1,"main-body"],[1,"page-wrapper"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"mb-9",3,"formGroup","ngSubmit"],[1,"form-floating"],["type","text","id","roleTitle","formControlName","roleTitle","pattern","[A-Za-z]+","required","","placeholder","ROLE TITLE",1,"form-control"],["for","roleTitle"],[4,"ngIf"],[4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"error-message"],[1,"checkbox-label"],["type","checkbox",1,"styled-checkbox",3,"checked","change"]],template:function(i,o){if(i&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"h5"),m(11,"Update Role"),l()(),a(12,"div",10)(13,"form",11),y("ngSubmit",function(){return o.onSubmit()}),a(14,"div",12),S(15,"input",13)(16,"label",14),u(17,ze,3,0,"div",15),l(),u(18,Ze,4,2,"div",16),a(19,"button",17),m(20," Update "),l()()()()()()()()()()()()),i&2){let n;c(13),d("formGroup",o.myForm),c(4),d("ngIf",((n=o.myForm.get("roleTitle"))==null?null:n.invalid)&&(((n=o.myForm.get("roleTitle"))==null?null:n.dirty)||((n=o.myForm.get("roleTitle"))==null?null:n.touched))),c(),d("ngForOf",o.privileges),c(),d("disabled",o.myForm.invalid||o.selectedPrivileges.length===0)}},dependencies:[E,F,U,O,N,V,G,H,$,B],styles:[".error-message[_ngcontent-%COMP%]{color:red}"]});let t=e;return t})();function Je(t,e){if(t&1&&(a(0,"td",18),m(1),l()),t&2){let s=e.$implicit;c(),ee(s.id)}}function Ke(t,e){t&1&&(a(0,"th",19),m(1,"Role"),l())}function We(t,e){if(t&1&&(a(0,"td",18),m(1),l()),t&2){let s=e.$implicit;c(),ee(s.name)}}function Xe(t,e){t&1&&(a(0,"th",19),m(1," Privileges "),l())}function Ye(t,e){if(t&1&&(a(0,"span"),m(1),S(2,"br"),l()),t&2){let s=e.$implicit;c(),w(" ",s.name," ")}}function et(t,e){if(t&1&&(a(0,"td",18),u(1,Ye,3,1,"span",20),l()),t&2){let s=e.$implicit;c(),d("ngForOf",s.privileges)}}function tt(t,e){t&1&&(a(0,"th",19),m(1," Actions "),l())}function it(t,e){if(t&1){let s=I();a(0,"button",23),y("click",function(){R(s);let i=f().$implicit,o=f();return x(o.onEditClick(i.id))}),a(1,"mat-icon"),m(2,"edit"),l()()}}function rt(t,e){if(t&1){let s=I();a(0,"button",24),y("click",function(){R(s);let i=f().$implicit,o=f();return x(o.delete(i.id))}),a(1,"mat-icon"),m(2,"delete"),l()()}}function ot(t,e){if(t&1&&(a(0,"td",18),u(1,it,3,0,"button",21)(2,rt,3,0,"button",22),l()),t&2){let s=f();c(),d("ngIf",s.updateRole),c(),d("ngIf",s.deleteRole)}}function nt(t,e){t&1&&S(0,"tr",25)}function at(t,e){t&1&&S(0,"tr",26)}function lt(t,e){if(t&1&&(a(0,"tr",27)(1,"td",28),m(2),l()()),t&2){f();let s=ie(9);c(2),w(' No data matching the filter "',s.value,'" ')}}var st=()=>[5,10,25,100],Ve=(()=>{let e=class e{ngOnInit(){let r=localStorage.getItem("authorities");this.authorities=this.encryptionService.decrypt(r,"2f7"),this.authorities.includes("EDIT::ROLE")&&(this.updateRole=!0),this.authorities.includes("DELETE::ROLE")&&(this.deleteRole=!0),this.getRoles()}constructor(r,i,o){this.router=r,this.roleService=i,this.encryptionService=o,this.displayedColumns=["Role","Privileges","Actions"],this.authorities="",this.updateRole=!1,this.deleteRole=!1}applyFilter(r){let i=r.target.value;this.dataSource.filter=i.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}getRoles(){this.roleService.getRoles().subscribe({next:r=>{this.dataSource=new Fe(r),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator},error:r=>{}})}onEditClick(r){this.router.navigate(["/home/roles/update/"+r])}delete(r){this.roleService.deleteRole(r).subscribe({next:i=>{this.getRoles()},error:console.log})}};e.\u0275fac=function(i){return new(i||e)(p(h),p(D),p(_))},e.\u0275cmp=T({type:e,selectors:[["app-list-role"]],viewQuery:function(i,o){if(i&1&&(W(Q,5),W(z,5)),i&2){let n;X(n=Y())&&(o.paginator=n.first),X(n=Y())&&(o.sort=n.first)}},decls:26,vars:5,consts:[[1,"pcoded-main-container"],[1,"pcoded-wrapper"],[1,"pcoded-content"],[1,"pcoded-inner-content"],[1,"main-body"],["matInput","","placeholder","Ex. ADMIN",3,"keyup"],["input",""],[1,"table-container"],["mat-table","","matSort","",3,"dataSource"],["mat-cell","",4,"matCellDef"],["matColumnDef","Role"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","Privileges"],["matColumnDef","Actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",3,"pageSizeOptions"],["mat-cell",""],["mat-header-cell","","mat-sort-header",""],[4,"ngFor","ngForOf"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","warn",3,"click",4,"ngIf"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(i,o){i&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-form-field")(6,"mat-label"),m(7,"Filter"),l(),a(8,"input",5,6),y("keyup",function(v){return o.applyFilter(v)}),l()(),a(10,"div",7)(11,"table",8),u(12,Je,2,1,"td",9),A(13,10),u(14,Ke,2,0,"th",11)(15,We,2,1,"td",9),k(),A(16,12),u(17,Xe,2,0,"th",11)(18,et,2,1,"td",9),k(),A(19,13),u(20,tt,2,0,"th",11)(21,ot,3,2,"td",9),k(),u(22,nt,1,0,"tr",14)(23,at,1,0,"tr",15)(24,lt,3,1,"tr",16),l(),S(25,"mat-paginator",17),l()()()()()()),i&2&&(c(11),d("dataSource",o.dataSource),c(11),d("matHeaderRowDef",o.displayedColumns),c(),d("matRowDefColumns",o.displayedColumns),c(2),d("pageSizeOptions",re(4,st)))},dependencies:[E,F,ge,_e,Re,Se,ye,xe,Ce,be,Ie,we,Te,Q,z,he,Me,pe,de,Pe,ce],styles:[".visually-hidden[_ngcontent-%COMP%]{position:absolute;left:-9999px;width:1px;height:1px;overflow:hidden}"]});let t=e;return t})();var Ue=(()=>{let e=class e{constructor(r,i){this.encryptionService=r,this.router=i}canActivate(r,i){let o=localStorage.getItem("authorities");return this.encryptionService.decrypt(o,"2f7").includes("READ::ROLE")?!0:(this.router.navigate(["/notfound"]),!1)}};e.\u0275fac=function(i){return new(i||e)(g(_),g(h))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var $e=(()=>{let e=class e{constructor(r,i){this.encryptionService=r,this.router=i}canActivate(r,i){let o=localStorage.getItem("authorities");return this.encryptionService.decrypt(o,"2f7").includes("ADD::ROLE")?!0:(this.router.navigate(["/notfound"]),!1)}};e.\u0275fac=function(i){return new(i||e)(g(_),g(h))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Be=(()=>{let e=class e{constructor(r,i){this.encryptionService=r,this.router=i}canActivate(r,i){let o=localStorage.getItem("authorities");return this.encryptionService.decrypt(o,"2f7").includes("EDIT::ROLE")?!0:(this.router.navigate(["/notfound"]),!1)}};e.\u0275fac=function(i){return new(i||e)(g(_),g(h))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ct=[{path:"",component:Ve,canActivate:[Z,Ue]},{path:"add",component:Oe,canActivate:[Z,$e]},{path:"update/:id",component:Ne,canActivate:[Z,Be]}],Ge=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=L({type:e}),e.\u0275inj=j({imports:[te.forChild(ct),te]});let t=e;return t})();var ti=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=L({type:e}),e.\u0275inj=j({imports:[oe,Ge,le,se,Ee,fe,ve,De,Le,ue,me]});let t=e;return t})();export{ti as a};
