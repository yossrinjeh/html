import{a as we}from"./chunk-MRVDKUFQ.js";import{a as B,b as ye}from"./chunk-TG267DBW.js";import{b as Pe}from"./chunk-OGGY5HJQ.js";import{a as q,c as Ae,d as Ee,e as Me,f as xe,g as Ne,h as Te,i as Ie,j as De,k as Oe,l as Le,m as Fe,o as Re}from"./chunk-DBWB3LBE.js";import{q as Ce,v as _e}from"./chunk-DBA5FPW7.js";import{a as Ve}from"./chunk-HAJ3YRHB.js";import{a as Ue}from"./chunk-KTNC6XIE.js";import{c as L,g as F,h as R,j as he,l as ge,m as P,n as U,o as be,p as ve,q as V,r as G,s as k,t as Se,v as j}from"./chunk-I7XF2BCB.js";import{c as ue,m as fe,o as Z}from"./chunk-UHIV2YIU.js";import{$b as y,Ba as oe,Bc as X,Ca as le,Dc as Y,Kb as p,La as re,Lb as Q,Mb as c,Vb as n,Wb as i,Xb as u,Yb as h,Zb as g,cc as b,ec as A,g as z,id as ce,jc as $,jd as O,kc as J,lc as K,m as te,mb as m,mc as x,nb as w,nc as o,nd as se,oc as N,od as pe,pc as E,qc as de,ra as S,rc as T,sa as ie,sc as I,tc as D,ua as C,va as _,wa as ne,wc as me,xa as ae}from"./chunk-WHIBKZZI.js";var M=(()=>{let t=class t{listen(){return this._listners.asObservable()}filter(a){this._listners.next(a)}constructor(a){this.http=a,this.URL="http://20.49.205.136/allowances",this._listners=new te}createAllowance(a){return this.http.post(this.URL,a)}getAllAllowances(){return this.http.get(this.URL)}updateAllowance(a,l){let r=`${this.URL}/${a}`;return this.http.put(r,l)}deleteAllowance(a){let l=`${this.URL}/${a}`;return this.http.delete(l)}};t.\u0275fac=function(l){return new(l||t)(re(ue))},t.\u0275prov=oe({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var H=class{};function We(e,t){e&1&&(n(0,"div",22),o(1," Description is required "),i())}function He(e,t){e&1&&(n(0,"div",22),o(1," Amount is required "),i())}function ze(e,t){if(e&1&&(n(0,"option",23),o(1),i()),e&2){let d=t.$implicit;c("value",d),m(),E("",d," ")}}function Qe(e,t){if(e&1&&(n(0,"option",23),o(1),i()),e&2){let d=t.$implicit;c("value",d.id),m(),de("",d.firstname," ",d.lastname,"")}}var je=(()=>{let t=class t{constructor(a,l,r){this.allowanceService=a,this.userService=l,this.router=r,this.allowance=new H,this.allUsers=[],this.categories=["FOOD","TRANSPORTATION","LODGING","ENTERTAINMENT","MISCELLANEOUS"]}ngOnInit(){this.loadAllUsers()}loadAllUsers(){this.userService.getAllUsers().subscribe(a=>{this.allUsers=a},a=>{console.error(a)})}add(a){if(a.valid){let l={id:"",userId:a.value.user,description:a.value.description,category:a.value.category,amount:a.value.amount,date:new Date().toISOString().toString()};this.allowanceService.createAllowance(l).subscribe(()=>{alert("Allowance added successfully!"),this.allowanceService.filter("RegisterClick")},r=>{console.error(r)})}}};t.\u0275fac=function(l){return new(l||t)(w(M),w(we),w(fe))},t.\u0275cmp=S({type:t,selectors:[["app-add-allowance"]],decls:35,vars:8,consts:[[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[3,"ngSubmit"],["addForm","ngForm"],[1,"form-group"],["for","description"],["type","text","id","description","name","description","required","","placeholder","Enter description",1,"form-control",3,"ngModel","ngModelChange"],["class","text-danger",4,"ngIf"],["for","amount"],["type","number","id","amount","name","amount","required","","placeholder","Enter amount",1,"form-control",3,"ngModel","ngModelChange"],["for","category"],["id","category","name","category","required","",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["for","user"],["id","user","name","user","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","submit","data-bs-dismiss","modal",1,"btn","btn-primary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],[1,"text-danger"],[3,"value"]],template:function(l,r){if(l&1){let f=y();n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5",3),o(4,"Add Allowance"),i(),u(5,"button",4),i(),n(6,"div",5)(7,"form",6,7),b("ngSubmit",function(){C(f);let s=x(8);return _(r.add(s))}),n(9,"fieldset")(10,"div",8)(11,"label",9),o(12,"Description:"),i(),n(13,"input",10),D("ngModelChange",function(s){return I(r.allowance.description,s)||(r.allowance.description=s),s}),i(),p(14,We,2,0,"div",11),i(),n(15,"div",8)(16,"label",12),o(17,"Amount:"),i(),n(18,"input",13),D("ngModelChange",function(s){return I(r.allowance.amount,s)||(r.allowance.amount=s),s}),i(),p(19,He,2,0,"div",11),i(),n(20,"div",8)(21,"label",14),o(22,"Category:"),i(),n(23,"select",15),D("ngModelChange",function(s){return I(r.allowance.category,s)||(r.allowance.category=s),s}),p(24,ze,2,2,"option",16),i()(),n(25,"div",8)(26,"label",17),o(27,"User:"),i(),n(28,"select",18),D("ngModelChange",function(s){return I(r.allowance.userId,s)||(r.allowance.userId=s),s}),p(29,Qe,2,3,"option",16),i()()(),n(30,"div",19)(31,"button",20),o(32,"Save"),i(),n(33,"button",21),o(34,"Close"),i()()()()()()}if(l&2){let f=x(8);m(13),T("ngModel",r.allowance.description),m(),c("ngIf",f.controls.description.errors==null?null:f.controls.description.errors.required),m(4),T("ngModel",r.allowance.amount),m(),c("ngIf",f.controls.amount.errors==null?null:f.controls.amount.errors.required),m(4),T("ngModel",r.allowance.category),m(),c("ngForOf",r.categories),m(4),T("ngModel",r.allowance.userId),m(),c("ngForOf",r.allUsers)}},dependencies:[ce,O,P,G,k,L,U,V,F,R,Se,ge,he]});let e=t;return e})();function Je(e,t){if(e&1){let d=y();n(0,"form",7)(1,"div",8)(2,"label",9),o(3,"Ammount:"),i(),u(4,"input",10),i(),n(5,"div",8)(6,"label",11),o(7,"Description:"),i(),u(8,"input",12),i(),n(9,"div",8)(10,"label",13),o(11,"Category:"),i(),n(12,"select",14)(13,"option",15),o(14,"FOOD"),i(),n(15,"option",16),o(16,"TRANSPORTATION"),i(),n(17,"option",17),o(18,"LODGING"),i(),n(19,"option",18),o(20,"ENTERTAINMENT"),i(),n(21,"option",19),o(22,"MISCELLANEOUS"),i()()(),n(23,"div",20)(24,"button",21),b("click",function(){C(d);let l=A();return _(l.updateAllowance())}),o(25," Submit "),i(),n(26,"button",22),o(27," Close "),i()()()}if(e&2){let d=A();c("formGroup",d.updateForm)}}var qe=(()=>{let t=class t{constructor(a,l){this.formB=a,this.allowanceService=l}ngOnInit(){if(this.allowance==null)return;console.log(this.allowance);let a=this.allowance;this.updateForm=this.formB.group({ammountAllowance:[a.amount],descriptionAllowance:[a.description],categoryAllowance:[a.category]}),this.updateForm.patchValue(a)}updateAllowance(){return z(this,null,function*(){this.allowance.description=this.updateForm.value.descriptionAllowance,this.allowance.amount=this.updateForm.value.ammountAllowance,this.allowance.category=this.updateForm.value.categoryAllowance,this.allowance.date=new Date().toISOString().toString(),this.allowanceService.updateAllowance(this.allowance.id,this.allowance).subscribe(a=>z(this,null,function*(){alert("Updated Successfully!"),console.log("allowance",this.allowance)}),a=>{console.error("Update failed:",a)})})}};t.\u0275fac=function(l){return new(l||t)(w(j),w(M))},t.\u0275cmp=S({type:t,selectors:[["app-update-allowance"]],inputs:{allowance:"allowance"},decls:8,vars:1,consts:[[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"form-group"],["for","date"],["type","number","value","","id","date","name","date","formControlName","ammountAllowance","placeholder","Tapez la date",1,"form-control"],["for","description"],["type","text","value","","id","description","name","description","formControlName","descriptionAllowance","placeholder","Tapez la description",1,"form-control"],["for","category"],["id","category","name","category","formControlName","categoryAllowance",1,"form-control"],["value","FOOD"],["value","TRANSPORTATION"],["value","LODGING"],["value","ENTERTAINMENT"],["value","MISCELLANEOUS"],[1,"modal-footer"],["type","submit","data-bs-dismiss","modal",1,"btn","btn-primary",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"]],template:function(l,r){l&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5",3),o(4,"Edit Allowance"),i(),u(5,"button",4),i(),n(6,"div",5),p(7,Je,28,1,"form",6),i()()()),l&2&&(m(7),c("ngIf",r.updateForm))},dependencies:[O,P,G,k,L,U,V,F,R,be,ve]});let e=t;return e})();function Xe(e,t){e&1&&(n(0,"th",32),o(1,"FirstName"),i())}function Ye(e,t){if(e&1&&(n(0,"td",33),o(1),i()),e&2){let d=t.$implicit;m(),N(d.user==null?null:d.user.firstname)}}function Ze(e,t){e&1&&(n(0,"th",32),o(1,"LastName"),i())}function et(e,t){if(e&1&&(n(0,"td",33),o(1),i()),e&2){let d=t.$implicit;m(),N(d.user==null?null:d.user.lastname)}}function tt(e,t){e&1&&(n(0,"th",32),o(1,"Month"),i())}function it(e,t){if(e&1&&(n(0,"td",33),o(1),X(2,"date"),i()),e&2){let d=t.$implicit;m(),E(" ",Y(2,1,d.date,"MMM d, yyyy")," ")}}function nt(e,t){e&1&&(n(0,"th",32),o(1,"Category"),i())}function at(e,t){if(e&1&&(n(0,"td",33),o(1),i()),e&2){let d=t.$implicit;m(),N(d.category)}}function ot(e,t){e&1&&(n(0,"th",32),o(1," Description "),i())}function lt(e,t){if(e&1&&(n(0,"td",33),o(1),i()),e&2){let d=t.$implicit;m(),N(d.description)}}function rt(e,t){e&1&&(n(0,"th",32),o(1,"Amount"),i())}function dt(e,t){if(e&1&&(n(0,"td",33),o(1),X(2,"number"),i()),e&2){let d=t.$implicit;m(),E(" ",Y(2,1,d.amount,"1.0-0")," ")}}function mt(e,t){e&1&&(n(0,"th",32),o(1," Actions "),i())}function ct(e,t){if(e&1){let d=y();n(0,"td",33)(1,"div",34)(2,"button",35),u(3,"i",36),i(),n(4,"div",37),u(5,"app-update-allowance",38),i()(),n(6,"div",34)(7,"button",39),u(8,"i",40),i(),n(9,"div",41)(10,"div",42)(11,"div",43)(12,"div",44)(13,"h5",45),o(14," Delete Announcement "),i(),n(15,"button",46)(16,"span",47),o(17,"\xD7"),i()()(),n(18,"div",48)(19,"h5"),o(20," Are you sure you want to delete this item? This action cannot be undone. "),i()(),n(21,"div",49)(22,"button",50),o(23," Close "),i(),n(24,"button",51),b("click",function(){let r=C(d).$implicit,f=A();return _(f.deleteAllowance(r.id))}),o(25," Confirm "),i()()()()()()()}if(e&2){let d=t.$implicit,a=t.index;m(2),Q("data-bs-target","#exampleModalupdate"+a),m(2),c("id","exampleModalupdate"+a),m(),c("allowance",d),m(2),Q("data-bs-target","#exampleModalConfirm"+a),m(2),c("id","exampleModalConfirm"+a)}}function st(e,t){e&1&&u(0,"tr",52)}function pt(e,t){e&1&&u(0,"tr",53)}function ut(e,t){if(e&1&&(n(0,"tr",54)(1,"td",55),o(2),i()()),e&2){A();let d=x(23);m(2),E(' No data matching the filter "',d.value,'" ')}}var ft=()=>[5,10,25,100],Be=(()=>{let t=class t{constructor(a,l){this.allService=a,this.formB=l,this.displayedColumns=["FirstName","LastName","Month","Category","Description","Amount","Action"],this.allService.listen().subscribe(r=>{this.loadData()})}ngOnInit(){this.loadData()}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}applyFilter(a){let l=a.target.value;this.dataSource.filter=l.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}loadData(){this.allService.getAllAllowances().subscribe(a=>{this.data=a,this.dataSource=new Re(this.data)},a=>{console.error("Error fetching allowances:",a)})}deleteAllowance(a){this.allService.deleteAllowance(a).subscribe(l=>{alert("Allowance deleted successfully"),this.loadData()})}};t.\u0275fac=function(l){return new(l||t)(w(M),w(j))},t.\u0275cmp=S({type:t,selectors:[["app-list-allowance"]],viewQuery:function(l,r){if(l&1&&($(q,7),$(B,7)),l&2){let f;J(f=K())&&(r.paginator=f.first),J(f=K())&&(r.sort=f.first)}},decls:51,vars:5,consts:[[1,"pcoded-main-container"],[1,"pcoded-wrapper"],[1,"pcoded-content"],[1,"pcoded-inner-content"],[1,"main-body"],[1,"page-wrapper"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModalAdd",1,"btn","btn-sm","transparent-button"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","black","viewBox","0 0 16 16",1,"bi","bi-plus-square"],["d","M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"],["d","M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"],["id","exampleModalAdd","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["matInput","","placeholder","Ex. Mia",3,"keyup"],["input",""],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","FirstName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","LastName"],["matColumnDef","Month"],["matColumnDef","Category"],["matColumnDef","Description"],["matColumnDef","Amount"],["matColumnDef","Action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"list-inline-item"],["type","button","data-bs-toggle","modal","data-toggle","tooltip","data-placement","top","title","Edit",1,"btn","btn-sm","rounded-0","transparent-button1"],[1,"fa","fa-edit","text-success"],["role","dialog","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade",3,"id"],[3,"allowance"],["type","button","data-toggle","tooltip","data-placement","top","title","Delete","data-bs-toggle","modal",1,"btn","btn-sm","rounded-0","transparent-button1"],[1,"fas","fa-trash","red-icon"],["tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(l,r){l&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"h5"),o(11,"Allowances"),i(),o(12," \xA0 "),n(13,"button",10),ne(),n(14,"svg",11),u(15,"path",12)(16,"path",13),i()(),ae(),n(17,"div",14),u(18,"app-add-allowance"),i()(),n(19,"mat-form-field")(20,"mat-label"),o(21,"Filter"),i(),n(22,"input",15,16),b("keyup",function(v){return r.applyFilter(v)}),i()(),n(24,"div",17)(25,"table",18),h(26,19),p(27,Xe,2,0,"th",20)(28,Ye,2,1,"td",21),g(),h(29,22),p(30,Ze,2,0,"th",20)(31,et,2,1,"td",21),g(),h(32,23),p(33,tt,2,0,"th",20)(34,it,3,4,"td",21),g(),h(35,24),p(36,nt,2,0,"th",20)(37,at,2,1,"td",21),g(),h(38,25),p(39,ot,2,0,"th",20)(40,lt,2,1,"td",21),g(),h(41,26),p(42,rt,2,0,"th",20)(43,dt,3,4,"td",21),g(),h(44,27),p(45,mt,2,0,"th",20)(46,ct,26,5,"td",21),g(),p(47,st,1,0,"tr",28)(48,pt,1,0,"tr",29)(49,ut,3,1,"tr",30),i(),u(50,"mat-paginator",31),i()()()()()()()()()()),l&2&&(m(25),c("dataSource",r.dataSource),m(22),c("matHeaderRowDef",r.displayedColumns),m(),c("matRowDefColumns",r.displayedColumns),m(2),c("pageSizeOptions",me(4,ft)))},dependencies:[Ae,Me,Ie,xe,Ee,De,Ne,Te,Oe,Le,Fe,q,B,ye,Pe,_e,Ce,je,qe,pe,se],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:0%}.transparent-button[_ngcontent-%COMP%]{background-color:transparent;border:none}.transparent-button[_ngcontent-%COMP%]:hover{background-color:#d7d7d7}.transparent-button1[_ngcontent-%COMP%]{background-color:transparent;border:none}.transparent-button1[_ngcontent-%COMP%]:hover{background-color:transparent}.transparent-button1[_ngcontent-%COMP%]:active{background-color:#ebebeb}.red-icon[_ngcontent-%COMP%]{color:red}.column-width[_ngcontent-%COMP%]{width:25%}"]});let e=t;return e})();var wt=[{path:"",component:Be,canActivate:[Ue,Ve]}],Pt=(()=>{let t=class t{};t.\u0275fac=function(l){return new(l||t)},t.\u0275mod=ie({type:t}),t.\u0275inj=le({imports:[Z.forChild(wt),Z]});let e=t;return e})();export{Pt as a};
