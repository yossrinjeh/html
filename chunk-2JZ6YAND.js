import{a as L,b as Z,c as Te}from"./chunk-X5NJ4WN3.js";import{a as Ce,k as Me,n as Ae}from"./chunk-O7KPVHKK.js";import{a as Ee}from"./chunk-ON656HJE.js";import{b as V}from"./chunk-UGTNDQIF.js";import{a as B}from"./chunk-RLJVDNLT.js";import{c as z,g as X,h as _e,j as fe,l as K,m as ge,q as ye,r as be,s as xe,w as Se,x as ve}from"./chunk-AL76BKH4.js";import{a as me,b as pe,c as he,e as ue,m as $,o as ie}from"./chunk-VZVTRB5S.js";import{$b as S,Ba as R,Ca as q,Kb as A,La as M,M as oe,Mb as x,Ob as ae,Rb as re,Sb as H,Tb as W,Ub as Y,Vb as i,Wb as o,Xb as u,Yb as k,Zb as I,cc as f,ec as l,hd as G,id as de,ja as P,m as ne,mb as m,nb as E,nc as s,oc as b,od as le,pc as se,qc as ce,ra as O,rc as F,sa as J,sc as U,tc as N,ua as g,va as y}from"./chunk-OXFVDIXM.js";var D=function(r){return r.PRESENT="PRESENT",r.ABSENT="ABSENT",r}(D||{}),v=function(r){return r.FULL_DAY="FULL_DAY",r.HALF_DAY="HALF_DAY",r.QUARTER_SHIFT="QUARTER_SHIFT",r}(v||{});var T=(()=>{let a=class a{listen(){return this._listners.asObservable()}filter(e){this._listners.next(e)}constructor(e){this.http=e,this.URL="http://20.49.205.136:3000/attendance-tracking",this.httpOptions={headers:new me({"Content-type":"application/json"})},this._listners=new ne,this._refreshNeeded$=new ne}get refreshNeeded(){return this._refreshNeeded$.asObservable()}create(e,t){return this.http.post(`${this.URL}/${e}`,t,this.httpOptions).pipe(P(()=>{this._refreshNeeded$.next()}))}findAll(){return this.http.get(this.URL,this.httpOptions)}findOne(e){return this.http.get(`${this.URL}/${e}`,this.httpOptions)}update(e,t){return this.http.put(`${this.URL}/updateAttendance/${e}`,t,this.httpOptions).pipe(P(()=>{this._refreshNeeded$.next()}))}updateUserAndAttendance(e,t){let n=`${this.URL}/updateUser/${e}`;return this.http.put(n,t).pipe(P(()=>{this._refreshNeeded$.next()}))}remove(e){return this.http.delete(`${this.URL}/${e}`,this.httpOptions)}find(e){return this.http.get(`${this.URL}/getUser/${e}`,this.httpOptions)}updateAttendanceRecord(e,t){let n=`${this.URL}/${e}`;return this.http.put(n,t,this.httpOptions).pipe(P(()=>{this._refreshNeeded$.next()}))}findAllUsers(){return this.http.get(`${this.URL}/users`,this.httpOptions).pipe(P(e=>console.log("Response from findAllUsers():",e)),oe(e=>{throw console.error("Error in findAllUsers():",e),e}))}findAllUsersWithAttendance(){return this.http.get(`${this.URL}/with-attendance`)}getAttendanceByUserIdAndDate(e,t){let n=`${this.URL}/${e}?date=${t}`;return this.http.get(n)}getUserIdByEmail(e){let t=`${this.URL}/getUserByEmail/${e}`;return this.http.get(t)}createAttendance(e,t){return this.http.post(`${this.URL}/create/${e}`,t,this.httpOptions).pipe(P(()=>{this._refreshNeeded$.next()}))}getTotalHalfShiftDaysForUserInMonth(e,t){let n=new pe().set("month",t.toString());return this.http.get(`${this.URL}/total-half-shift-days/${e}`,{params:n})}};a.\u0275fac=function(t){return new(t||a)(M(he))},a.\u0275prov=R({token:a,factory:a.\u0275fac,providedIn:"root"});let r=a;return r})();function je(r,a){if(r&1&&(i(0,"th"),s(1),o()),r&2){let c=a.$implicit;m(),se(" ",c," ")}}function He(r,a){if(r&1&&(k(0),A(1,je,2,1,"th",22),I()),r&2){let c=a.$implicit;m(),x("ngForOf",c.days)}}function We(r,a){r&1&&u(0,"span",11)}function Ye(r,a){if(r&1){let c=S();i(0,"span",40),f("click",function(){g(c);let t=l().$implicit,n=l(2).$implicit,d=l();return y(d.openModal(n,t,"PRESENT"))}),o()}}function Be(r,a){if(r&1){let c=S();i(0,"span",41),f("click",function(){g(c);let t=l().$implicit,n=l(2).$implicit,d=l();return y(d.openModal(n,t,"PRESENT"))}),o()}}function Qe(r,a){if(r&1){let c=S();i(0,"span",42),f("click",function(){g(c);let t=l().$implicit,n=l(2).$implicit,d=l();return y(d.openModal(n,t,"PRESENT"))}),o()}}function Je(r,a){if(r&1){let c=S();i(0,"span",43),f("click",function(){g(c);let t=l().$implicit,n=l(2).$implicit,d=l();return y(d.openModal(n,t,"ABSENT"))}),o()}}function qe(r,a){if(r&1){let c=S();i(0,"span",44),f("click",function(){g(c);let t=l().$implicit,n=l(2).$implicit,d=l();return y(d.openModal(n,t,""))}),s(1,"-"),o()}}function Ge(r,a){if(r&1){let c=S();i(0,"td"),A(1,We,1,0,"span",24)(2,Ye,1,0)(3,Be,1,0)(4,Qe,1,0)(5,Je,1,0)(6,qe,2,0),i(7,"div",25)(8,"div",26)(9,"div",27)(10,"div",28)(11,"h4",29),s(12,"Modal Heading"),o(),u(13,"button",30),o(),i(14,"p"),s(15,"Select Shift type please :"),o(),i(16,"div")(17,"div")(18,"input",31),f("change",function(){g(c);let t=l(3);return y(t.choose(0))}),o(),i(19,"label",32),s(20,"Absent"),o()(),i(21,"input",33),f("change",function(){g(c);let t=l(3);return y(t.choose(1))}),o(),i(22,"label",34),s(23,"Half Day"),o()(),i(24,"div")(25,"input",31),f("change",function(){g(c);let t=l(3);return y(t.choose(2))}),o(),i(26,"label",32),s(27,"Quarter Day"),o()(),i(28,"div")(29,"input",35),f("change",function(){g(c);let t=l(3);return y(t.choose(3))}),o(),i(30,"label",36),s(31,"Full Day"),o()(),i(32,"div",37)(33,"button",38),s(34," Close "),o(),i(35,"button",39),f("click",function(){g(c);let t=l(3);return y(t.handleUpdate(t.selectedDuration))}),s(36," Update "),o()()()()()()}if(r&2){let c=a.$implicit,e=l().$implicit,t=l().$implicit,n=l();m(),re(1,n.isWeekend(c)?1:n.getStatusForDay(t,c,e.monthIndex)==="PRESENT"&&n.getShiftTypeForDay(t,c,e.monthIndex)==="FULL_DAY"&&!n.isWeekend(c)?2:n.getStatusForDay(t,c,e.monthIndex)==="PRESENT"&&n.getShiftTypeForDay(t,c,e.monthIndex)==="QUARTER_SHIFT"&&!n.isWeekend(c)?3:n.getStatusForDay(t,c,e.monthIndex)==="PRESENT"&&n.getShiftTypeForDay(t,c,e.monthIndex)==="HALF_DAY"&&!n.isWeekend(c)?4:n.getStatusForDay(t,c,e.monthIndex)==="ABSENT"?5:6)}}function ze(r,a){if(r&1&&(k(0),A(1,Ge,37,1,"td",22),I()),r&2){let c=a.$implicit;m(),x("ngForOf",c.days)}}function Xe(r,a){if(r&1&&(k(0),i(1,"tr")(2,"td",23),s(3),o(),A(4,ze,2,1,"ng-container",22),o(),I()),r&2){let c=a.$implicit,e=l();m(3),ce("",c.firstname," ",c.lastname,""),m(),x("ngForOf",e.monthData)}}var we=(()=>{let a=class a{constructor(e,t){this.attendanceService=e,this.messageService=t,this.monthData=[],this.users=[],this.daysInMonth=[],this.currentMonthYear="",this.selectedDate=new Date,this.isModalOpened=!1,this.refreshSubscription=this.attendanceService.refreshNeeded.subscribe(()=>{this.loadAttendanceRecords()})}ngOnDestroy(){this.refreshSubscription.unsubscribe()}ngOnInit(){this.generateMonthData(this.selectedDate),this.loadAttendanceRecords()}showWarningToast(e){this.messageService.add({severity:"warn",summary:"Warning",detail:e,life:5e3,styleClass:"custom-toast"})}showSuccessToast(e){this.messageService.add({severity:"success",summary:"Success",detail:e,life:5e3,styleClass:"custom-toast"})}choose(e){console.log(e),e==1?(this.status=D.PRESENT,this.selectedDuration=v.HALF_DAY):e==2?(this.status=D.PRESENT,this.selectedDuration=v.QUARTER_SHIFT):e==3?(this.status=D.PRESENT,this.selectedDuration=v.FULL_DAY):this.status=D.ABSENT}loadAttendanceRecords(){this.attendanceService.findAllUsers().subscribe({next:e=>{console.log(e),this.users=e},error:e=>{console.error("There was an error!",e)}})}getStatusForDay(e,t,n){let d=e.attendanceRecord.filter(_=>{let h=new Date(_.date);return h.getMonth()===n&&h.getDate()===t});return d.length>0?d[0].status:""}isWeekend(e){let n=new Date(this.selectedDate.getFullYear(),this.selectedDate.getMonth(),e).getDay();return n===0||n===6}getShiftTypeForDay(e,t,n){let d=e.attendanceRecord.filter(_=>{let h=new Date(_.date);return h.getMonth()===n&&h.getDate()===t}),p=d.length>0?d[0].shiftType:"";return p!==""?p:null}generateMonthData(e){let t=e.getMonth(),n=e.getFullYear(),d=new Date(n,t+1,0).getDate();this.daysInMonth=Array.from({length:d},(h,C)=>C+1);let p=["January","February","March","April","May","June","July","August","September","October","November","December"];this.currentMonthYear=`${p[t]} ${n}`;let _={monthName:this.currentMonthYear,monthIndex:t,days:this.daysInMonth,users:this.users};this.monthData.push(_)}switchMonth(e){this.monthData=[],this.selectedDate.setMonth(this.selectedDate.getMonth()+e),this.generateMonthData(this.selectedDate)}openModal(e,t,n){console.log(e,t,n),this.status=n,this.user=e,this.day=t,this.isModalOpened=!0}handleUpdate(e){let t=this.selectedDate.getFullYear(),n=this.selectedDate.getMonth()+1,d=this.day<10?`0${this.day}`:this.day,p=`${t}-${n<10?"0":""}${n}-${d}`;this.attendanceService.getAttendanceByUserIdAndDate(this.user.id,p).subscribe(_=>{if(console.log(this.user.id),console.log(p),_&&this.status=="PRESENT"){console.log(_.id);let h={date:p,absent_reason:null,shiftType:e,status:D.PRESENT,userId:this.user.id};this.attendanceService.update(_.id,h).subscribe(C=>{this.showSuccessToast("Attendance updated successfully!")},C=>{this.showWarningToast("Failed to update attendance.")})}else if(_&&this.status=="ABSENT"){let h={date:p,absent_reason:"this attendance updated by HR",shiftType:null,status:D.ABSENT,userId:this.user.id};this.attendanceService.update(_.id,h).subscribe(C=>{this.showSuccessToast("Attendance updated successfully!")},C=>{this.showWarningToast("Failed to update attendance.")})}else{let h={date:p,shiftType:this.selectedDuration,status:D[this.status],absent_reason:null,userId:this.user.id};this.attendanceService.createAttendance(h.userId,h).subscribe(C=>{this.showSuccessToast("Attendance updated successfully!")},C=>{this.showWarningToast("Failed to update attendance.")})}},_=>{this.showWarningToast(_)})}};a.\u0275fac=function(t){return new(t||a)(E(T),E(L))},a.\u0275cmp=O({type:a,selectors:[["app-update-attendance"]],decls:49,vars:3,consts:[[1,"pcoded-main-container"],[1,"pcoded-wrapper"],[1,"pcoded-content"],[1,"container"],[1,"row"],[1,"col-md-12"],[1,"card","status-card"],[1,"card-body"],[1,"card-title"],[1,"status-legend","row"],[1,"col-md-2","legend-item"],[1,"holiday-icon","bi","bi-star-fill","text-warning"],[1,"far","fa-check-circle","text-success"],[1,"bi","bi-clock-history","text-dark"],[1,"fas","fa-adjust","col-orange"],[1,"far","fa-times-circle","text-danger"],[1,"calendar-container"],[1,"month-nav"],[1,"nav-button",3,"click"],[1,"bi","bi-arrow-left"],[1,"bi","bi-arrow-right"],[1,"calendar"],[4,"ngFor","ngForOf"],[1,"employee-column"],["class","holiday-icon bi bi-star-fill text-warning"],["id","myModal",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-bs-dismiss","modal",1,"btn-close"],["type","radio","id","quarterDayRadio","name","durationRadio",3,"change"],["for","quarterDayRadio"],["type","radio","id","halfDayRadio","name","durationRadio",3,"change"],["for","halfDayRadio"],["type","radio","id","fullDayRadio","name","durationRadio",3,"change"],["for","fullDayRadio"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"click"],["data-bs-toggle","modal","data-bs-target","#myModal",1,"far","fa-check-circle","text-success",3,"click"],["data-bs-toggle","modal","data-bs-target","#myModal",1,"bi","bi-clock-history","text-dark",3,"click"],["data-bs-toggle","modal","data-bs-target","#myModal",1,"fas","fa-adjust","col-orange",3,"click"],["data-bs-toggle","modal","data-bs-target","#myModal",1,"far","fa-times-circle","text-danger",3,"click"],["data-bs-toggle","modal","data-bs-target","#myModal",3,"click"]],template:function(t,n){t&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"h5",8),s(9,"Type icons :"),o(),i(10,"div",9)(11,"div",10),u(12,"span",11),i(13,"span"),s(14,"Weekend"),o()(),i(15,"div",10),u(16,"span",12),i(17,"span"),s(18,"Present - Full Day"),o()(),i(19,"div",10),u(20,"span",13),i(21,"span"),s(22,"Present - Quarter Shift"),o()(),i(23,"div",10),u(24,"span",14),i(25,"span"),s(26,"Present - Half Day"),o()(),i(27,"div",10),u(28,"span",15),i(29,"span"),s(30,"Absent"),o()()()()()()()(),i(31,"div",16)(32,"div",17)(33,"button",18),f("click",function(){return n.switchMonth(-1)}),u(34,"span",19),o(),i(35,"h2"),s(36),o(),i(37,"button",18),f("click",function(){return n.switchMonth(1)}),u(38,"span",20),o()(),i(39,"div",21)(40,"table")(41,"thead")(42,"tr")(43,"th"),s(44,"Name of Employee"),o(),A(45,He,2,1,"ng-container",22),o()(),i(46,"tbody"),A(47,Xe,5,3,"ng-container",22),o()()()()()()(),u(48,"p-toast")),t&2&&(m(36),b(n.currentMonthYear),m(9),x("ngForOf",n.monthData),m(2),x("ngForOf",n.users))},dependencies:[G,Z],styles:["th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid #ccc;padding:8px;text-align:center}thead[_ngcontent-%COMP%]{background-color:#f2f2f2}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}tr[_ngcontent-%COMP%]:hover{background-color:#ddd}.month-nav[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.nav-button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:10px 20px;border-radius:5px;cursor:pointer}.calendar[_ngcontent-%COMP%]{margin-top:20px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:8px;text-align:center}.employee-column[_ngcontent-%COMP%]{font-weight:700}.status-container[_ngcontent-%COMP%]{display:flex;align-items:center}"]});let r=a;return r})();var j=function(r){return r.PRESENT="PRESENT",r.ABSENT="ABSENT",r}(j||{});function Ze(r,a){if(r&1&&(i(0,"th"),s(1),o()),r&2){let c=a.$implicit;m(),b(c)}}function et(r,a){if(r&1){let c=S();i(0,"td")(1,"div",12)(2,"button",13),f("click",function(){let n=g(c).$implicit,d=l().$implicit,p=l();return y(p.openModal(d,n))}),s(3," P "),o(),i(4,"div",14)(5,"div",15)(6,"div",16)(7,"div",17)(8,"h4",18),s(9,"Modal Heading"),o(),u(10,"button",19),o(),i(11,"p"),s(12,"Select Shift type please :"),o(),i(13,"div")(14,"input",20),f("change",function(){g(c);let t=l(2);return y(t.choose(0))}),o(),i(15,"label",21),s(16,"Half Day"),o()(),i(17,"div")(18,"input",22),f("change",function(){g(c);let t=l(2);return y(t.choose(1))}),o(),i(19,"label",23),s(20,"Quarter Day"),o()(),i(21,"div")(22,"input",24),f("change",function(){g(c);let t=l(2);return y(t.choose(2))}),o(),i(23,"label",25),s(24,"Full Day"),o()(),i(25,"div",26)(26,"button",27),s(27," Close "),o(),i(28,"button",28),f("click",function(){g(c);let t=l(2);return y(t.handleUpdate())}),s(29," Update "),o()()()()()(),u(30,"br"),i(31,"div",12)(32,"button",29),f("click",function(){let n=g(c).$implicit,d=l().$implicit,p=l();return y(p.openModal(d,n))}),s(33," A "),o(),i(34,"div",30)(35,"div",15)(36,"div",16)(37,"div",17)(38,"h4",18),s(39,"Modal Heading"),o(),u(40,"button",19),o(),i(41,"div",31)(42,"div",32)(43,"label",33),s(44,"Reason for Absence:"),o(),i(45,"input",34),N("ngModelChange",function(t){g(c);let n=l(2);return U(n.absenceReason,t)||(n.absenceReason=t),y(t)}),o()()(),i(46,"div",26)(47,"button",27),s(48," Close "),o(),i(49,"button",28),f("click",function(){g(c);let t=l(2);return y(t.updateAttendanceRecord())}),s(50," Update "),o()()()()()()()}if(r&2){let c=l(2);m(45),F("ngModel",c.absenceReason)}}function tt(r,a){if(r&1&&(k(0),i(1,"tr")(2,"td",11),s(3),o(),W(4,et,51,1,"td",null,H),o(),I()),r&2){let c=a.$implicit,e=a.index,t=l();m(),ae("even-row",e%2!==0),m(2),b(c.firstname),m(),Y(t.daysInMonth)}}var Oe=(()=>{let a=class a{choose(e){console.log(e),e==0?this.selectedDuration=v.HALF_DAY:e==1?this.selectedDuration=v.QUARTER_SHIFT:this.selectedDuration=v.FULL_DAY}constructor(e){this.attendanceService=e,this.monthData=[],this.users=[],this.daysInMonth=[],this.currentMonthYear="",this.selectedDate=new Date,this.absenceReason="",this.selectedDuration=v.HALF_DAY,this.isModalOpened=!1}ngOnInit(){this.generateMonthData(new Date),this.attendanceService.findAllUsers().subscribe({next:e=>{console.log(e),this.users=e},error:e=>{console.error("There was an error!",e)}})}openModal(e,t){console.log(e,t),this.user=e,this.day=t,this.isModalOpened=!0}handleUpdate(){console.log("User:",this.user),console.log("Day:",this.day);let e=this.selectedDate.getFullYear(),t=this.selectedDate.getMonth()+1,n=this.day<10?`0${this.day}`:this.day,d=`${e}-${t<10?"0":""}${t}-${n}`;this.attendanceService.getAttendanceByUserIdAndDate(this.user.id,d).subscribe(p=>{if(console.log(this.user.id),console.log(d),p){console.log(p.id);let _={date:d,absent_reason:null,shiftType:this.selectedDuration,status:j.PRESENT,userId:this.user.id};this.attendanceService.update(p.id,_).subscribe(h=>{console.log(this.user,"succesfully")},h=>{console.error("Error updating attendance record:",h)})}else{let _={date:d,shiftType:this.selectedDuration,status:j.PRESENT,absent_reason:null,userId:this.user.id};this.attendanceService.createAttendance(_.userId,_).subscribe(h=>{console.log("Attendance record created successfully:",h)},h=>{console.error("Error creating attendance record:",h)})}},p=>{console.error("Error fetching attendance record:",p)})}isWeekend(e){let n=new Date(this.selectedDate.getFullYear(),this.selectedDate.getMonth(),e).getDay();return n===0||n===6}generateMonthData(e){let t=e.getMonth(),n=e.getFullYear(),d=new Date(n,t+1,0).getDate();this.daysInMonth=Array.from({length:d},(h,C)=>C+1);let p=["January","February","March","April","May","June","July","August","September","October","November","December"];this.currentMonthYear=`${p[t]} ${n}`;let _={monthName:this.currentMonthYear,monthIndex:t,days:this.daysInMonth,users:this.users};this.monthData.push(_)}switchMonth(e){this.monthData=[],this.selectedDate.setMonth(this.selectedDate.getMonth()+e),this.generateMonthData(this.selectedDate)}updateAttendanceRecord(){let e=this.selectedDate.getFullYear(),t=this.selectedDate.getMonth()+1,n=this.day<10?`0${this.day}`:this.day,d=`${e}-${t<10?"0":""}${t}-${n}`;this.attendanceService.getAttendanceByUserIdAndDate(this.user.id,d).subscribe(p=>{if(console.log(this.user.id),console.log(d),p){let _={date:d,shiftType:null,status:j.ABSENT,absent_reason:this.absenceReason,userId:this.user.id};this.attendanceService.update(this.user.id,_).subscribe(h=>{console.log("Attendance record updated successfully:",h)},h=>{console.error("Error updating attendance record:",h)})}else{let _={date:d,shiftType:null,status:j.ABSENT,absent_reason:this.absenceReason,userId:this.user.id};this.attendanceService.createAttendance(_.userId,_).subscribe(h=>{console.log("Attendance record created successfully:",h)},h=>{console.error("Error creating attendance record:",h)})}})}};a.\u0275fac=function(t){return new(t||a)(E(T))},a.\u0275cmp=O({type:a,selectors:[["app-add-attendance"]],decls:21,vars:2,consts:[[1,"pcoded-main-container"],[1,"pcoded-wrapper"],[1,"pcoded-content"],[1,"calendar-container"],[1,"month-nav"],[1,"btn","nav-button",3,"click"],[1,"bi","bi-arrow-left"],[1,"bi","bi-arrow-right"],[1,"table-responsive"],[1,"table","table-bordered","smaller-table"],[4,"ngFor","ngForOf"],[1,"employee-column"],[1,"button-container"],["data-bs-toggle","modal","data-bs-target","#myModal",1,"btn","btn-primary","small-button",3,"click"],["id","myModal",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-bs-dismiss","modal",1,"btn-close"],["type","radio","id","halfDayRadio","name","durationRadio",3,"change"],["for","halfDayRadio"],["type","radio","id","quarterDayRadio","name","durationRadio",3,"change"],["for","quarterDayRadio"],["type","radio","id","fullDayRadio","name","durationRadio",3,"change"],["for","fullDayRadio"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger"],["type","button",1,"btn","btn-primary",3,"click"],["data-bs-toggle","modal","data-bs-target","#myModal2",1,"btn","btn-danger","small-button",3,"click"],["id","myModal2",1,"modal","fade"],[1,"modal-body"],[1,"mb-3"],["for","absenceReason",1,"form-label"],["type","text","id","absenceReason","name","absenceReason",1,"form-control",3,"ngModel","ngModelChange"]],template:function(t,n){t&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"button",5),f("click",function(){return n.switchMonth(-1)}),u(6,"span",6),o(),i(7,"h2"),s(8),o(),i(9,"button",5),f("click",function(){return n.switchMonth(1)}),u(10,"span",7),o()(),i(11,"div",8)(12,"table",9)(13,"thead")(14,"tr")(15,"th"),s(16,"Name"),o(),W(17,Ze,2,1,"th",null,H),o()(),i(19,"tbody"),A(20,tt,6,3,"ng-container",10),o()()()()()()()),t&2&&(m(8),b(n.currentMonthYear),m(9),Y(n.daysInMonth),m(3),x("ngForOf",n.users))},dependencies:[G,z,X,K],styles:["th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid #ccc;padding:8px;text-align:center}thead[_ngcontent-%COMP%]{background-color:#f2f2f2}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}tr[_ngcontent-%COMP%]:hover{background-color:#d3d3d3}.month-nav[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.nav-button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:10px 20px;border-radius:5px;cursor:pointer}.calendar[_ngcontent-%COMP%]{margin-top:20px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:8px;text-align:center}.employee-column[_ngcontent-%COMP%]{font-weight:700}.status-container[_ngcontent-%COMP%]{display:flex;align-items:center}.disabled[_ngcontent-%COMP%]{background-color:#f2f2f2;color:#999;pointer-events:none;width:.5px}"]});let r=a;return r})();function nt(r,a){if(r&1&&(i(0,"tr")(1,"td"),s(2),o(),i(3,"td"),s(4),o(),i(5,"td"),s(6),o(),i(7,"td"),s(8),o()()),r&2){let c=a.$implicit;m(2),b(c.date),m(2),b(c.status),m(2),b(c.absent_reason),m(2),b(c.shiftType)}}var te=(()=>{let a=class a{constructor(e){this.attendanceService=e,this.attendanceRecord=[],this.displayedColumns=["date","status","absentReason","shift"],this.refreshSubscription=this.attendanceService.refreshNeeded.subscribe(()=>{this.loadAttendanceRecords()})}ngOnInit(){this.loadAttendanceRecords()}ngOnDestroy(){this.refreshSubscription.unsubscribe()}loadAttendanceRecords(){if(this.user)this.id=this.user.id,this.attendanceService.find(this.id).subscribe(e=>{this.user=e});else{let e=localStorage.getItem("user");if(e){let t=JSON.parse(e).email;this.attendanceService.getUserIdByEmail(t).subscribe(n=>{this.id=n.id,this.attendanceService.find(this.id).subscribe(d=>{this.user=d})})}}}getAttendanceStatus(e){let t=this.user?.attendanceRecord.find(n=>n.date===e);return t?t.status:""}};a.\u0275fac=function(t){return new(t||a)(E(T))},a.\u0275cmp=O({type:a,selectors:[["app-list-attendance"]],inputs:{user:"user"},decls:22,vars:0,consts:[[1,"pcoded-wrapper"],[1,"pcoded-content"],[1,"pcoded-inner-content"],[1,"container"],[1,"d-flex","align-items-center","justify-content-end","my+3"],["id","tableExample","data-list",'{"valueNames":["name","job","date","status","reason","shift"],"page":5,"pagination":true}'],[1,"table-responsive"],[1,"table","table-sm"],["id","bulk-select-body",1,"list"],[1,"pagination","d-none"]],template:function(t,n){t&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),u(4,"div",4),i(5,"div",5)(6,"div",6)(7,"table",7)(8,"thead")(9,"tr")(10,"th"),s(11,"Date"),o(),i(12,"th"),s(13,"Status"),o(),i(14,"th"),s(15,"Reason"),o(),i(16,"th"),s(17,"Shift"),o()()(),i(18,"tbody",8),W(19,nt,9,4,"tr",null,H),o()()(),u(21,"div",9),o()()()()()),t&2&&(m(19),Y(n.user.attendanceRecord))},styles:[".table-responsive[_ngcontent-%COMP%]{border-radius:10px;overflow-x:auto}.table[_ngcontent-%COMP%]{border-collapse:collapse;width:100%}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 15px}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f5f5f5;border-bottom:2px solid #ddd}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f9f9f9}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#e9ecef}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:20px}.pagination[_ngcontent-%COMP%]   .page-item[_ngcontent-%COMP%]{margin:0 5px}.pagination[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{color:#007bff;border:1px solid #007bff;padding:6px 12px;border-radius:5px}.pagination[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]:hover{background-color:#007bff;color:#fff}.container[_ngcontent-%COMP%]{margin-top:20px}.d-flex[_ngcontent-%COMP%]{display:flex}.align-items-center[_ngcontent-%COMP%]{align-items:center}.justify-content-end[_ngcontent-%COMP%]{justify-content:flex-end}.my-3[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:1rem}.px-1[_ngcontent-%COMP%]{padding-left:.25rem;padding-right:.25rem}.pt-3[_ngcontent-%COMP%]{padding-top:1rem}.mb-3[_ngcontent-%COMP%]{margin-bottom:1rem}.flex-between-center[_ngcontent-%COMP%]{justify-content:space-between;align-items:center}.white-space-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.pe-0[_ngcontent-%COMP%]{padding-right:0}.fs--1[_ngcontent-%COMP%]{font-size:.875rem}@media (max-width: 768px){.container[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px}}"]});let r=a;return r})();function ot(r,a){if(r&1){let c=S();i(0,"div",33)(1,"label",43),s(2,"Shift Type:"),o(),i(3,"select",44),N("ngModelChange",function(t){g(c);let n=l();return U(n.selectedShiftType,t)||(n.selectedShiftType=t),y(t)}),i(4,"option",45),s(5,"Quarter Shift"),o(),i(6,"option",46),s(7,"Half Day"),o(),i(8,"option",47),s(9,"Full Day"),o()()()}if(r&2){let c=l();m(3),F("ngModel",c.selectedShiftType)}}function at(r,a){if(r&1){let c=S();i(0,"div",33)(1,"label",48),s(2,"Absent Reason:"),o(),i(3,"input",49),N("ngModelChange",function(t){g(c);let n=l();return U(n.absentReason,t)||(n.absentReason=t),y(t)}),o()()}if(r&2){let c=l();m(3),F("ngModel",c.absentReason)}}var Re=(()=>{let a=class a{constructor(e,t){this.attendanceService=e,this.messageService=t}ngOnInit(){let e=localStorage.getItem("user");if(e){let C=JSON.parse(e).email;this.attendanceService.getUserIdByEmail(C).subscribe($e=>{this.id=$e.id,this.attendanceService.getTotalHalfShiftDaysForUserInMonth(this.id,d).subscribe(Q=>{this.halfShifts=Q.halfShifts,this.fullShifts=Q.fullShifts,this.quarterShifts=Q.quarterShifts,this.absences=Q.absences})})}let t=new Date,n=t.getFullYear(),d=t.getMonth()+1,p=t.getDate(),_=d<10?`0${d}`:d,h=p<10?`0${p}`:p;this.dateStr=`${n}-${_}-${h}`}showWarningToast(e){this.messageService.add({severity:"warn",summary:"Warning",detail:e,life:5e3,styleClass:"custom-toast"})}showSuccessToast(){this.messageService.add({severity:"success",summary:"Success",detail:"Successfully submitted your attendance!",life:5e3,styleClass:"custom-toast"})}submitForm(){this.attendanceService.find(this.id).subscribe(n=>n);let e=this.selectedShiftType;Object.values(v).includes(e);let t={status:this.selectedStatus,shiftType:e,absent_reason:this.absentReason,id:"",date:this.dateStr,userId:this.id};this.attendanceService.create(this.id,t).subscribe(n=>{n&&n.message?this.showWarningToast(n.message):this.showSuccessToast()},n=>{console.error("You have already :",n)})}};a.\u0275fac=function(t){return new(t||a)(E(T),E(L))},a.\u0275cmp=O({type:a,selectors:[["app-create-attendance"]],decls:95,vars:11,consts:[["rel","stylesheet","type","text/css","href","https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"],["rel","stylesheet","type","text/css","href","/node_modules/primeng/resources/themes/nova-light/theme.css"],["rel","stylesheet","type","text/css","href","/node_modules/primeng/resources/primeng.min.css"],["rel","stylesheet","type","text/css","href","https://pixinvent.com/stack-responsive-bootstrap-4-admin-template/app-assets/css/bootstrap-extended.min.css"],["rel","stylesheet","type","text/css","href","https://pixinvent.com/stack-responsive-bootstrap-4-admin-template/app-assets/fonts/simple-line-icons/style.min.css"],["rel","stylesheet","type","text/css","href","https://pixinvent.com/stack-responsive-bootstrap-4-admin-template/app-assets/css/colors.min.css"],["rel","stylesheet","type","text/css","href","https://pixinvent.com/stack-responsive-bootstrap-4-admin-template/app-assets/css/bootstrap.min.css"],["href","https://fonts.googleapis.com/css?family=Montserrat&display=swap","rel","stylesheet"],[1,"pcoded-main-container"],[1,"pcoded-wrapper"],[1,"pcoded-content"],[1,"row","mb-4"],[1,"col-lg-12"],[1,"text-uppercase"],[1,"row"],[1,"col-xl-3","col-sm-6","col-12"],[1,"card"],[1,"card-content"],[1,"card-body"],[1,"media","d-flex"],[1,"align-self-center"],[1,"icon-graph","success","font-large-2","float-left"],[1,"media-body","text-right"],[1,"media-body","text-left"],[1,"danger"],[1,"icon-rocket","danger","font-large-2","float-right"],[1,"warning"],[1,"icon-pie-chart","warning","font-large-2","float-right"],[1,"icon-pencil","primary","font-large-2","float-left"],[1,"col-lg-6"],[1,"card","form-card"],[1,"card-title","mb-4"],[1,"animated-form",3,"ngSubmit"],[1,"mb-3"],["for","status",1,"form-label"],["name","status","id","status",1,"form-select",3,"ngModel","ngModelChange"],["value","PRESENT"],["value","ABSENT"],["class","mb-3",4,"ngIf"],[1,"card","flex","justify-content-center"],[3,"showTransformOptions","showTransitionOptions","hideTransitionOptions"],["type","submit",1,"btn","btn-primary"],[1,"card","list-card"],["for","shiftType",1,"form-label"],["name","shiftType","id","shiftType",1,"form-select",3,"ngModel","ngModelChange"],["value","QUARTER_SHIFT"],["value","HALF_DAY"],["value","FULL_DAY"],["for","absentReason",1,"form-label"],["type","text","name","absentReason","id","absentReason",1,"form-control",3,"ngModel","ngModelChange"]],template:function(t,n){t&1&&(u(0,"link",0)(1,"link",1)(2,"link",2)(3,"link",3)(4,"link",4)(5,"link",5)(6,"link",6)(7,"link",7),i(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11)(12,"div",12)(13,"h3",13),s(14,"Attendance"),o(),u(15,"br")(16,"br"),i(17,"b"),s(18,"My Statistics for this month :"),o()()(),i(19,"div",14)(20,"div",15)(21,"div",16)(22,"div",17)(23,"div",18)(24,"div",19)(25,"div",20),u(26,"i",21),o(),i(27,"div",22)(28,"h3"),s(29,"Total Half Shift"),o(),i(30,"span"),s(31),o()()()()()()(),i(32,"div",15)(33,"div",16)(34,"div",17)(35,"div",18)(36,"div",19)(37,"div",23)(38,"h3",24),s(39,"Total Full Shift"),o(),i(40,"span"),s(41),o()(),i(42,"div",20),u(43,"i",25),o()()()()()(),i(44,"div",15)(45,"div",16)(46,"div",17)(47,"div",18)(48,"div",19)(49,"div",23)(50,"h3",26),s(51,"Total Quarter Shift"),o(),i(52,"span"),s(53),o()(),i(54,"div",20),u(55,"i",27),o()()()()()(),i(56,"div",15)(57,"div",16)(58,"div",17)(59,"div",18)(60,"div",19)(61,"div",20),u(62,"i",28),o(),i(63,"div",22)(64,"h3"),s(65,"Total Absent"),o(),i(66,"span"),s(67),o()()()()()()()(),i(68,"div",14)(69,"div",29)(70,"div",30)(71,"div",18)(72,"h2",31),s(73,"Create Attendance for Today"),o(),i(74,"form",32),f("ngSubmit",function(){return n.submitForm()}),i(75,"div",33)(76,"label",34),s(77,"Status:"),o(),i(78,"select",35),N("ngModelChange",function(p){return U(n.selectedStatus,p)||(n.selectedStatus=p),p}),i(79,"option",36),s(80,"Present"),o(),i(81,"option",37),s(82,"Absent"),o()()(),A(83,ot,10,1,"div",38)(84,at,4,1,"div",38),i(85,"div",39),u(86,"p-toast",40),i(87,"button",41),s(88," Create Attendance "),o()()()()()(),i(89,"div",29)(90,"div",42)(91,"div",18)(92,"h2",31),s(93,"My Attendances"),o(),u(94,"app-list-attendance"),o()()()()()()()),t&2&&(m(31),b(n.halfShifts),m(10),b(n.fullShifts),m(12),b(n.quarterShifts),m(14),b(n.absences),m(11),F("ngModel",n.selectedStatus),m(5),x("ngIf",n.selectedStatus==="PRESENT"),m(),x("ngIf",n.selectedStatus==="ABSENT"),m(2),x("showTransformOptions","translateY(100%)")("showTransitionOptions","1000ms")("hideTransitionOptions","1000ms")("showTransformOptions","translateX(100%)"))},dependencies:[de,ge,be,xe,z,ye,X,_e,K,fe,Z,te],styles:[".card-body[_ngcontent-%COMP%]{padding:30px}.card-title[_ngcontent-%COMP%]{color:#333}.form-select[_ngcontent-%COMP%], .form-control[_ngcontent-%COMP%]{border-radius:5px}.submit-btn[_ngcontent-%COMP%]{margin-top:15px}.list-card[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 4px 6px #0000001a;margin-top:30px}@media (max-width: 768px){.list-card[_ngcontent-%COMP%]{margin-top:15px}}.grey-bg[_ngcontent-%COMP%]{background-color:#f5f7fa}"]});let r=a;return r})();var Ie=(()=>{let a=class a{constructor(e,t){this.encryptionService=e,this.router=t}canActivate(e,t){let n=localStorage.getItem("authorities");return this.encryptionService.decrypt(n,"2f7").includes("ADD::ATTENDANCE")?!0:(this.router.navigate(["/notfound"]),!1)}};a.\u0275fac=function(t){return new(t||a)(M(V),M($))},a.\u0275prov=R({token:a,factory:a.\u0275fac,providedIn:"root"});let r=a;return r})();var Fe=(()=>{let a=class a{constructor(e,t){this.encryptionService=e,this.router=t}canActivate(e,t){let n=localStorage.getItem("authorities");return this.encryptionService.decrypt(n,"2f7").includes("CREATE::ATTENDANCE")?!0:(this.router.navigate(["/notfound"]),!1)}};a.\u0275fac=function(t){return new(t||a)(M(V),M($))},a.\u0275prov=R({token:a,factory:a.\u0275fac,providedIn:"root"});let r=a;return r})();var Ue=(()=>{let a=class a{constructor(e,t){this.encryptionService=e,this.router=t}canActivate(e,t){let n=localStorage.getItem("authorities");return this.encryptionService.decrypt(n,"2f7").includes("EDIT::ATTENDANCE")?!0:(this.router.navigate(["/notfound"]),!1)}};a.\u0275fac=function(t){return new(t||a)(M(V),M($))},a.\u0275prov=R({token:a,factory:a.\u0275fac,providedIn:"root"});let r=a;return r})();var rt=[{path:"ListAttendance",component:te,canActivate:[B,Ee]},{path:"addAttendance",component:Oe,canActivate:[B,Ie]},{path:"updateAttendance",component:we,canActivate:[B,Ue]},{path:"createAttendance",component:Re,canActivate:[B,Fe]}],Ne=(()=>{let a=class a{};a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=J({type:a}),a.\u0275inj=q({imports:[ie.forChild(rt),ie]});let r=a;return r})();var Xt=(()=>{let a=class a{};a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=J({type:a}),a.\u0275inj=q({providers:[T,L],imports:[le,Ne,ue,Se,ve,Te,Ce,Ae,Me]});let r=a;return r})();export{T as a,Xt as b};
